@{
    ViewBag.Title = "Ví dụ - Databinding";
}
<link href="~/Content/css/style.css" rel="stylesheet" />
<!-- knockout -->

<script src="~/Content/knockout/knockout-3.1.0.js"></script>
<script src="~/Content/jquery/jquery.min.js"></script>
<script src="~/Content/knockout/knockout.validation.min.js"></script>

<link href="~/Content/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
<script src="~/Content/bootstrap/js/bootstrap.min.js"></script>
<script src="~/Content/bootstrap/js/bootstrap.plugins.min.js"></script>


<h2 class="caption">HÀNG HÓA</h2>
<div class="row-fluid">
    <!---Left -->
    <div class="span4">
        <div class="w-box-header">
            <i class="icon-list"></i>&nbsp;Danh sách Văn phòng (<span data-bind="html: CountSearch() + '/' + List().length"></span>)
            <span class="pull-right">
                <a class="btn btn-success" data-bind="click: CreateHanghoa"><i class=" icon-plus icon-white"></i></a>
            </span>
        </div>

        <div class="w-box-content cnt_a" data-bind="fadeVisible: true">
            <div class="form-vertical">
                <div class="row-fluid">
                    <input class="controls" data-bind="value: SearchName, valueUpdate: 'afterkeydown', event: { keyup: btnSearchName }" />
                    <a class="btn btn-success" data-bind="click: btnSearchName"><span class="icon-search icon-white"></span></a>
                </div>
                <div class="row-fluid">
                    <div style="height: 430px; overflow: auto;">
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th class="span1">Mã số</th>
                                        <th class="span3" style="width: 200px;">Tên</th>
                                        <th class="span1">Giá</th>
                                        <th class="span1">Sửa</th>
                                        <th class="span1">Xóa</th>
                                    </tr>
                                </thead>
                                <tbody data-bind="template: { name: 'RowItem', foreach: List }"></tbody>
                                <tfoot data-bind="visible: List().length == 0">
                                    <tr>
                                        <td colspan="4">Không có dữ liệu</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script id="RowItem" type="text/html">
            <tr data-bind="css: { normalrow: (($index() % 2) == 0), alternativerow: ($index() % 2 != 0) }, visible: IsVisible() == true">
                <td style="font-weight: bold;"><a style="cursor: pointer"><span data-bind="html: Maso"></span></a></td>
                <td style="font-weight: bold;"><a style="cursor: pointer" data-bind="click: $root.btnSetCurrent"><span data-bind="html: Ten"></span></a></td>
                <td data-bind="html: Giaban"></td>
                <td style="text-align: right;">
                    <a href="#" class="btn btn-warning" title="Sửa hàng hóa" data-bind="click: $root.Edit"><i class="icon-edit icon-white"></i></a>
                </td>
                <td style="text-align: right;">
                    <a href="#" class="btn btn-danger" title="Xóa hàng hóa" data-bind="click: $root.remove"><i class="icon-remove icon-white"></i></a>
                </td>
            </tr>
        </script>
    </div>
    <!---End Left -->
    <!---Right -->
    <div class="span8" data-bind="with: Current">
        <div class="w-box-header">
            <i class="icon-list"></i>&nbsp;Thông tin chi tiết
        </div>
        <div class="w-box-content cnt_a" data-bind="fadeVisible: true">
            <div class="form-vertical">
                <div class="row-fluid">
                    <div style="height: 456px; overflow: auto;">
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped" border="1">
                                <tbody>
                                    <tr><td class="span2">Mã hàng hóa</td><td class="span5"><span data-bind="text: Maso, visible: IsEdit()==false"></span><input type="text" data-bind="value: Maso, visible: IsEdit(), valueUpdate: 'afterkeydown'" /></td></tr>
                                    <tr><td>Tên hàng hóa</td><td><span data-bind="text: Ten, visible: IsEdit()==false"></span><input type="text" data-bind="value: Ten, visible: IsEdit(), valueUpdate: 'afterkeydown'" /></td></tr>
                                    <tr><td>Giá bán</td><td><span data-bind="text: Giaban, visible: IsEdit()==false"></span><input type="text" data-bind="value: Giaban, visible: IsEdit(), valueUpdate: 'afterkeydown'" /></td></tr>
                                </tbody>
                            </table>
                            <button data-bind="visible: IsEdit()==true, click: $root.luuHanghoa" class="btn btn-primary">Lưu <i class="icon-ok icon-white"></i></button>
                            <button data-bind="click: $root.Thoat,visible: IsEdit()==true" class="btn btn-default">Hủy <i class="icon-trash"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!---End Right -->
<script src="~/Scripts/Insite/Views/Home/Index.js"></script>
